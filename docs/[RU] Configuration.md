# Настройка

Все конфигурационные файлы расположены в `/addons/sourcemod/configs/scp/*имя_карты*`. В случае использования карты из мастерской путь измениться на `/addons/sourcemod/configs/scp/workshop/*id*/*имя_карты*`.  
За исключением файла загрузки пользовательского контента `downloads.txt`. Он находится `/addons/sourcemod/configs/scp/`  
Для каждой карты необходима своя папка с конфигурационными файлами.  

## [Classes.json](https://github.com/GeTtOo/SCP-Breach-CSGO/blob/main/addons/sourcemod/configs/scp/scp_site101/classes.json)

Отвечает за настройку классов игроков.  
По умолчанию делиться на 4 группы (**Personnel**, **MOG**, **Chaos**, **SCP**). Вы можете добавлять сколько угодно команд. Для этого просто добавьте секцию (к примеру ГОК).  

| Параметр      | Значение      | Подробно  |
| ------------- |:-------------:| ---------|
| Percent       | Число от 0 до 100 | Процентное соотношение игроков в командах [^1]|
| Priority      | true или false    | Устанавливает класс приоритетным [^2]|

Блок начинается с имени команды, оно должно быть уникальным.

[^1]: ВНИМАНИЕ общая доля должна равняться 100!
[^2]: Обязательный для появления в начале раунда. К примеру: при малом количестве игроков Вам необходимо наличие хотя бы одного SCP. 
При значение данного параметра "true", SCP будет обязан появиться.

**Пример блока**  
```json
"SCP": {
	"Percent": 30
	"Priority": true
	
	"Classes": {
		Структура подробно описывается ниже
	}
}
```

### Classes – в этой секции описываются саб классы команды  
Не все параметры обязательны к настройке. Если параметр не указан ему будет присвоено стандартное значение (к примеру health будет равна 100) или он будет проигнорирован (в случае с дверьми, которые необходимы, в основном классу SCP).

| Параметр      | Значение      | Подробно  |
| ------------- |:-------------:| ---------|
| percent | Число от 0 до 100 | Процентное соотношение данного класса в команде при появление [^1]|
| priority | true или false | Устанавливает класс приоритетным [^2]|
| overlay | "имя оверлея" | Оверлей, который будет показан игроку при появлении |
| escape | true или false  | Может ли данный класс эвакуироваться или сбежать |
| cae | "Имя класса" | Класс, который получит игрок после побега или эвакуации |
| health | Число от 1 до 100 | Количество hp |
| armor | Число от 0 до 100 | Количество брони |
| helmet | true или false | Выдача игроку шлема |
| speed | Целое число | Скорость игрока |
| multipler | Число с плавающей точкой | Множитель базовой скорости |
| items | \["Предмет 1", "Предмет 2"\] | Предметы, которые будут у игрока (карты доступа и т.д.). Описываются в файле entities.json |
| weapons | \["Оружие 1", "Оружие 2"\] | Оружие, которое будет у игрока и его количество |
| doors | \["Дверь 1", "Дверь 2"\] | ID двери, которая будет открыта при появление |
| comment | "Текст" | Секция для заметок |

### Позиция игрока при появлении  
Настройка позиции игрока может состоять как из одной строчки, так и из большого массива. Во втором случае игроки будут распределены по точкам в случайном порядке.   

| Параметр      | Значение      | Подробно  |
| ------------- |:-------------:| ---------|
| pos |  | Начало блока |
| vec | \[1.0, 1.0, 1.0\] | Точка появления игроков на карте |
| ang | \[0, 180, 0\] | Угол поворота игрока при появлении |

### Модель игрока
Тут будет куча текста, потому что цель нашего существования понять проще, чем данный блок.  

| Параметр      | Значение      | Подробно  |
| ------------- |:-------------:| ---------|
| id |  |  |
| bodygroups |  |  |
| base |  |  |
| head |  |  |
| eyes |  |  |
| helmet |  |  |
| mask |  |  |
| body |  |  |
| belt |  |  |
| pl |  |  |
| pr |  |  |
| skin |  |  |

### Побег или эвакуация игрока  
В случае, если данный параметр указан игрок сможет покинуть комплекс и указанной команде будет зачислено очко победы.

| Параметр      | Значение      | Подробно  |
| ------------- |:-------------:| ---------|
| trigger | Целое число | ID триггера эвакуации/побега |
| team | "Команда" | Команда, которую получит игрок после эвакуации/побега |
| class | "Саб класс" | Класс, который получит игрок после эвакуации/побега |
| savepos | true или false | Сохраняться позицию игрока после эвакуации/побега или телепортировать на точку появление класса |
| wp | "Команда" | Команда, которая получит балл победы при эвакуации/побеге |

### Предметы и оружие 
Данные блоки крайне вариативны. Есть возможность установить рандомизацию предмета, его количество и т.д  

Рандомизация нескольких предметов указывается в формате \[{"Процент":"Предмет", "Процент":"Предмет"}\]. После появление игроку выпадет один из перечисленных предметов.  
**Пример:**  
```json
"items":[{"70":"card_scientist","30":"card_major_scientist"}]
```

Количество предметов указывается в формате \[\["Имя предмета", количество]]  
**Пример:**  
```json
"items":[["weapon_healthshot", 5]]
```

### Пример блока класса
```json
"Scientist": {
  "pos":[
	{"vec":[-2751,-2967,0]},
	{"vec":[-7776,-2569,0]},
	{"vec":[-2279,-2745,0],"ang":[0,225,0]},
	{"vec":[-5859,-5337,0],"ang":[0,180,0]}
  ],
  "percent":20,
  "priority": true,
  "overlay":"scientist",
  "model":{
    	"id":"scientist",
    	"bodygroups":{
		"base":0,
		"head":[0,1,2,3,4,5],
		"eyes":[0,1,2,3]
        },
	"skin":0
  },
  "escape":{
	"trigger":330025,
	"team":"MOG",
	"class":"Lieutenant",
	"savepos":true,
	"wp":"MOG"
  }
  "health": 100,
  "armor": 100,
  "helmet":true,
  "speed": 260,
  "multipler": 1.0,
  "items":[{"70":"card_scientist","30":"card_major_scientist"},"268_cap"],
  "weapons": ["weapon_m4a1_silencer", "weapon_usp_silencer", ["weapon_healthshot", 2], "weapon_tagrenade"],
  "doors": [447],
  "comment": "test"
}
```

## [config.json](https://github.com/GeTtOo/SCP-Breach-CSGO/blob/main/addons/sourcemod/configs/scp/scp_site101/config.json)

В данном файле происходит настройка основных параметров мода  

### Параметры:

```c
"ff": true – разрешает огонь по своим 
"debug": false – настройка вывода информации для разработчиков (ВНИМАНИЕ если Вы не понимаете что это НЕ ТРОГАЙТЕ)
"DefaultGlobalClass": "Chaos" – команда игрока по умолчанию 
"DefaultClass": "D Class" – класс игрока по умолчанию (должен находиться в секции команды)
"invsize": 5 – максимальный размер инвентаря игрока  
"NukeTime": 110.0 – время с момента активации до взрыва боеголовки уничтожающий комплекс)
"NukeKillPos": 400.0 – координата высоты ниже который все игроки будут убиты при взрыве боеголовки
"NukeSound": "*/scp/warhead_announcement.mp3" – аудиофайл, который будет воспроизведен при активации боеголовки
"NukeButtonID": 356023 – ID кнопки на карте, которая активирует боеголовки 
"AdminRoom": [-4890,-6340,0] – координаты комнаты администратора (игрок будет телепортирован при «проведение беседы»)
```


## [doors.json](https://github.com/GeTtOo/SCP-Breach-CSGO/blob/main/addons/sourcemod/configs/scp/scp_site101/doors.json)

В данном файле настраиваются двери и доступ к ним. Блок начинается с ID двери, который можно узнать при включенном параметре `debug` в [config.json](https://github.com/GeTtOo/SCP-Breach-CSGO/blob/main/addons/sourcemod/configs/scp/scp_site101/config.json).  

| Параметр      | Значение      | Подробно  |
| ------------- |:-------------:| ---------|
| location | "Текст" | Название, что бы Вы не запутались в этой каше ID’шников (в моде не используется)
| access | Число от 0 до 10 | Уровень доступа
| scp | true или false | Могут ли SCP открыть дверь

**Пример:**  
```json
"354154": {
	"location": "Gate A Up",
	"access": 0,
	"scp": false
}
```

## [entities.json](https://github.com/GeTtOo/SCP-Breach-CSGO/blob/main/addons/sourcemod/configs/scp/scp_site101/entities.json)

Файл для настроек своих предметов (entity). Крайне не рекомендуем любые модификации данного файла (особенное если Вы не понимаете что, как и почему)  

| Параметр      | Значение      | Подробно  |
| ------------- |:-------------:| ---------|
| model | "путь к моделе" | Модель предмета |
| mass | Число с плавающей точкой | Масса предмета |
| skin | Целое число | Номер текстуры предмета |
| access | Массив уровней доступа | доступ, которые даёт предмет |
| cooldown | Целое число | Время задержки после использования |

**Пример:**  
```json
"card_mog_commander": {
	"model":"models/eternity/props/keycard.mdl",
	"mass":0.2,
	"skin":3,
	"access":[1,2,4,5,6,7,8,9]
}
```

### Уровни доступа 
------------------

------------------

------------------

## [regions.json](https://github.com/GeTtOo/SCP-Breach-CSGO/blob/main/addons/sourcemod/configs/scp/scp_site101/regions.json)

Настройка собственных зон (указателей на карте)  

```c
"radius": 800 – радиус зоны 
"pos": [3250,-2222,100] – координаты зоны
"name": "SCP-914" – отображаемое игрокам имя зоны 
```

## [spawn_map.json](https://github.com/GeTtOo/SCP-Breach-CSGO/blob/main/addons/sourcemod/configs/scp/scp_site101/spawn_map.json)

В данном файле осуществляется настройка появления предметов на карте  

```c
"Имя предмента" – оружие (к примеру weapon_deagle) или предмет (к примеру card_o5)
{
  "chance": 100 – шанс появления (от 1 до 100)
  "pos": [578, -3444, 43] – позиция появления
}
```

## [914.json](https://github.com/GeTtOo/SCP-Breach-CSGO/blob/main/addons/sourcemod/configs/scp/scp_site101/914.json)

В случае отключения модуля 914, данный конфигурационный файл не используется.  
Файл настройки SCP 914. **ВНИМАНИЕ! НЕ ТРОГАТЬ, ОНО ВАС СОЖРЁТ!**    

### Общие настройки  

```c
"usemathcounter": true – выбор режима (работает по countername, либо switchbutton)
"countername": "scp_914_logic_counter" – имя counter'a
"switchbutton": 443873 – ID кнопки переключения качества
"runbutton": 516151 – ID кнопки запуска машины
"runtime": 8 – время перед телепортацией в другую секцию при нажатии кнопки runbutton
"searchzone": [[3630, -2072, 20], [3762, -1947, 90]] – два вектора из которых строиться куб поиска предметов (сначала нижняя точка, затем верхняя)
"distance": [0, 425, 0] – вектор смещения относительно первой камеры (если проще – куда телепортирует игрока после «звонка»)
"decsription" - ༼ つ ◕_◕ ༽つ (просто текст, не используется)
```

### Настройка рецептов  

```c
"rough", "coarse", "one_by_one", "fine", "very_fine" – параметр качества установленный на 914
{
  "имя предмета" – оружие (к примеру weapon_deagle) или предмет (к примеру card_o5)
  "card_o5"
  [
    ["имя получаемого предмета", [Шанс уничтожения предмета от 0 до 100], [Шанс успешного улучшения предмета от 0 до 100]]
    ["weapon_m4a1_silencer", 0, 100]
  ]
  "player" – если необходимо провести манипуляции с игроком
  [
    ["Эффект, накладываемый на игрока (regeneration, speed, berserk, death)", Процент успешного «улучшения» от 0 до 100]
    ["Speed", 50]
  ]
}
```

Если у предмета указана несколько вариантов развития, то будет выбрано одно из них случайным образом. К примеру:

```json
"weapon_usp_silencer": [
  ["weapon_deagle", 30, 70],
  ["weapon_awp", 40, 90]
]
```
