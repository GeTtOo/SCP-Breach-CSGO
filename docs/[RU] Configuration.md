# Настройка

Все конфигурационные файлы расположены в `/addons/sourcemod/configs/scp/*имя_карты*`. В случае использования карты из мастерской путь измениться на `/addons/sourcemod/configs/scp/workshop/*id*/*имя_карты*`.  
За исключением файла загрузки пользовательского контента `downloads.txt`. Он находится `/addons/sourcemod/configs/scp/`  
Для каждой карты необходима своя папка с конфигурационными файлами.  

При проведение любых манипуляций рекомендуется использовать текстовой редактор с поддержкой подсветки синтаксиса и ошибок.  

## [Classes.json](https://github.com/GeTtOo/SCP-Breach-CSGO/blob/main/addons/sourcemod/configs/scp/scp_site101/classes.json)

Отвечает за настройку классов игроков.  
По умолчанию делиться на 4 группы (**Personnel**, **MOG**, **Chaos**, **SCP**). Вы можете добавлять сколько угодно команд. Для этого просто добавьте секцию (к примеру ГОК).  

| Параметр      | Значение      | Подробно  |
| ------------- |:-------------:| ---------|
| Percent       | Число от 0 до 100 | Процентное соотношение игроков в командах [^1]|
| Priority      | true или false    | Устанавливает класс приоритетным [^2]|

Блок начинается с имени команды, оно должно быть уникальным.

**Пример блока**  
```json
"SCP": {
	"Percent": 30
	"Priority": true
	
	"Classes": {
		Структура подробно описывается ниже
	}
}
```

### Classes – в этой секции описываются саб классы команды  
Не все параметры обязательны к настройке. Если параметр не указан ему будет присвоено стандартное значение (к примеру health будет равна 100) или он будет проигнорирован (в случае с дверьми, которые необходимы, в основном классу SCP).

| Параметр      | Значение      | Подробно  |
| ------------- |:-------------:| ---------|
| percent | Число от 0 до 100 | Процентное соотношение данного класса в команде при появление [^1]|
| priority | true или false | Устанавливает класс приоритетным [^2]|
| overlay | "имя оверлея" | Оверлей, который будет показан игроку при появлении |
| escape | true или false  | Может ли данный класс эвакуироваться или сбежать |
| cae | "Имя класса" | Класс, который получит игрок после побега или эвакуации |
| health | Число от 1 до 100 | Количество hp |
| armor | Число от 0 до 100 | Количество брони |
| helmet | true или false | Выдача игроку шлема |
| speed | Целое число | Скорость игрока |
| multipler | Число с плавающей точкой | Множитель базовой скорости |
| items | \["Предмет 1", "Предмет 2"\] | Предметы, которые будут у игрока (карты доступа и т.д.). Описываются в файле entities.json |
| weapons | \["Оружие 1", "Оружие 2"\] | Оружие, которое будет у игрока и его количество |
| doors | \["Дверь 1", "Дверь 2"\] | ID двери, которая будет открыта при появление |
| comment | "Текст" | Секция для заметок |

### Позиция игрока при появлении  
Настройка позиции игрока может состоять как из одной строчки, так и из большого массива. Во втором случае игроки будут распределены по точкам в случайном порядке.   

| Параметр      | Значение      | Подробно  |
| ------------- |:-------------:| ---------|
| pos |  | Начало блока |
| vec | \[1.0, 1.0, 1.0\] | Точка появления игроков на карте |
| ang | \[0, 180, 0\] | Угол поворота игрока при появлении |

### Модель игрока
Тут будет куча текста, потому что цель нашего существования понять проще, чем данный блок.  ¯\_(ツ)_/¯

| Параметр      | Значение      | Подробно  |
| ------------- |:-------------:| ---------|
| id |  |  |
| bodygroups |  |  |
| base |  |  |
| head |  |  |
| eyes |  |  |
| helmet |  |  |
| mask |  |  |
| body |  |  |
| belt |  |  |
| pl |  |  |
| pr |  |  |
| skin |  |  |

### Побег или эвакуация игрока  
В случае, если данный параметр указан игрок сможет покинуть комплекс и указанной команде будет зачислено очко победы.

| Параметр      | Значение      | Подробно  |
| ------------- |:-------------:| ---------|
| trigger | Целое число | ID триггера эвакуации/побега |
| team | "Команда" | Команда, которую получит игрок после эвакуации/побега |
| class | "Саб класс" | Класс, который получит игрок после эвакуации/побега |
| savepos | true или false | Сохраняться позицию игрока после эвакуации/побега или телепортировать на точку появление класса |
| wp | "Команда" | Команда, которая получит балл победы при эвакуации/побеге |

### Предметы и оружие 
Данные блоки крайне вариативны. Есть возможность установить рандомизацию предмета, его количество и т.д  

Рандомизация нескольких предметов указывается в формате `[{"Процент":"Предмет", "Процент":"Предмет"}]`. После появление игроку выпадет один из перечисленных предметов.  
**Пример:**  
```json
"items":[{"70":"card_scientist","30":"card_major_scientist"}]
```

Количество предметов указывается в формате `[["Имя предмета", количество]]`  
**Пример:**  
```json
"items":[["weapon_healthshot", 5]]
```
------------------

### Пример блока класса  
```json
"Scientist": {
  "pos":[
	{"vec":[-2751,-2967,0]},
	{"vec":[-7776,-2569,0]},
	{"vec":[-2279,-2745,0],"ang":[0,225,0]},
	{"vec":[-5859,-5337,0],"ang":[0,180,0]}
  ],
  "percent":20,
  "priority": true,
  "overlay":"scientist",
  "model":{
    	"id":"scientist",
    	"bodygroups":{
		"base":0,
		"head":[0,1,2,3,4,5],
		"eyes":[0,1,2,3]
        },
	"skin":0
  },
  "escape":{
	"trigger":330025,
	"team":"MOG",
	"class":"Lieutenant",
	"savepos":true,
	"wp":"MOG"
  }
  "health": 100,
  "armor": 100,
  "helmet":true,
  "speed": 260,
  "multipler": 1.0,
  "items":[{"70":"card_scientist","30":"card_major_scientist"},"268_cap"],
  "weapons": ["weapon_m4a1_silencer", "weapon_usp_silencer", ["weapon_healthshot", 2], "weapon_tagrenade"],
  "doors": [447],
  "comment": "test"
}
```

## [config.json](https://github.com/GeTtOo/SCP-Breach-CSGO/blob/main/addons/sourcemod/configs/scp/scp_site101/config.json)

В данном файле происходит настройка основных параметров мода  

### Основанные параметры  
| Параметр      | Значение      | Подробно  |
| ------------- |:-------------:| ---------|
| ff | true или false | Разрешает или запрещает огонь по своим 
| debug | true или false | Настройка вывода информации для разработчиков [^3]
| logmode | 0, 1, 2, 3 | 
| DefaultGlobalClass | "Имя команды" | Команда игрока по умолчанию 
| DefaultClass | "Имя класса" | Класс игрока по умолчанию [^4]
| invsize | Целое число | Максимальный размер инвентаря игрока  
| usablecards | true или false | 
| tsto | Целое число | 
| psars | Целое число | 
| AdminRoom | \[0, 0, 0\] | Координаты комнаты администратора [^5]

### Подкрепление  
¯\_(ツ)_/¯

### Meta, модели и бодигруппы  
Если Вы думали, что выше было сложно, то Вы очень сильно ошиблись. Надеюсь душу дъяволу продать не успели, ибо сейчас это очень пригодиться. Нет, я серьезно, есть бубен - берите и стучите. Понять происходящее сложнее чем теорему Шеннона о машинах Тьюринга.  ¯\_(ツ)_/¯

### Альфа-боеголовка  
| Параметр      | Значение      | Подробно  |
| ------------- |:-------------:| ---------|
| time | Целое число | Время с момента активации до взрыва боеголовки
| killpos | Целое число | Координата высоты ниже который все игроки будут убиты при взрыве
| sound | "Путь к звуковому файлу" | Аудиофайл, который будет воспроизведен при активации боеголовки
| cancelsound | "Путь к звуковому файлу" | Аудиофайл, который будет воспроизведен при отмене  

**Блок кнопок:**  
| Параметр      | Значение      | Подробно  |
| ------------- |:-------------:| ---------|
| ready | Целое число | ID кнопки на карте, которая активирует кнопку активации |
| active | Целое число | ID кнопки на карте, которая активирует боеголовки |
| cancel | Целое число | ID кнопки на карте, которая деактивирует боеголовку |

**spawnlist**  
¯\_(ツ)_/¯

### Телепортация  
Вы можете расставить по карте точки телепортации, для более быстро перемещения администраторами игроков или себя любимых.  
Точка телепортации пишется в формате: `"Имя":{"vec":[координаты], "ang":[угол поворота камеры игрока]}`  
**Пример:**  
```json
"D spawn":{"vec":[-2413,-5632,0],"ang":[0,0,0]},
```

### \[Опционально\] SCP-914[^6]  
Любые изменения крайне не рекомендованы![^3]  
| Параметр      | Значение      | Подробно  |
| ------------- |:-------------:| ---------|
| usemathcounter | true или false | Выбор режима (countername или switchbutton) |
| countername | "Имя" | Имя counter'a |
| switchbutton | Целое число | ID кнопки переключения качества |
| runbutton | Целое число | ID кнопки запуска машины |
| runtime | Целое число | время перед телепортацией в другую секцию после нажатии runbutton |
| searchzone | \[\[Координаты\], \[Координаты\]\] | Два вектора из которых строиться куб поиска предметов [^7] |
| distance | \[Координаты\] | Вектор смещения относительно первой камеры [^8] |  

### \[Опционально\] SCP-049[^6]  
Параметры перечисленные ниже настраиваются в блоке "revive"
| Параметр      | Значение      | Подробно  |
| ------------- |:-------------:| ---------|
| time | Целое число | Время, которая понадобиться для «исцеления» игрока |
| multi | true или false | «Исцелять» сразу нескольких игроков |
| inpvs | true или false |  |
¯\_(ツ)_/¯  

### \[Опционально\] SCP-173[^6]  
¯\_(ツ)_/¯ 

### \[Опционально\] SCP-457[^6]  
| Параметр      | Значение      | Подробно  |
| ------------- |:-------------:| ---------|
| ignitetime | Целое число | Время горения игрока при ударе |


------------------

### Пример конфигурационного файла:  
```json
    "ff":true,
    "debug":true,
    "logmode":0,
    "DefaultGlobalClass":"Personnel",
    "DefaultClass":"D Class",
    "invsize": 5,
    "usablecards":true,
    "tsto":5,
    "psars": 30,
    "AdminRoom": [-4890,-6340,0],
    "reinforce":{
        "time":180,
        "ratiodeadplayers":60
    },
    "meta": {
        "models": [
            {"id":"dclass","path":"models/player/custom_player/eternity/d_class.mdl","bginf":[0,7,4,1,0,0,1,0,1,0,0]},
            {"id":"scientist","path":"models/player/custom_player/eternity/scientists.mdl","bginf":[1,6,4,0,0,0,0,0,0,0,0]},
            {"id":"mog","path":"models/player/custom_player/eternity/mog.mdl","bginf":[0,4,3,5,2,15,3,3,0,1,1]},
            {"id":"chaos","path":"models/player/custom_player/eternity/chaos.mdl","bginf":[3,4,4,4,2,0,0,0,3,0,0]}
        ]
    },
    "nuke": {
        "time":110,
        "killpos":1690,
        "sound":"*/scp/warhead_announcement.mp3",
        "cancelsound":"*/scp/warhead_canceled.mp3",
        "buttons":{
            "ready":356001,
            "active":356023,
            "cancel":356001
        },
        "spawnlist":[]
    },
    "teleport": {
        "D spawn":{"vec":[-2413,-5632,0],"ang":[0,0,0]},
        "MOG spawn":{"vec":[-10739,-5920,1712],"ang":[0,0,0]},
        "Chaos spawn":{"vec":[-7128,-5693,1712],"ang":[0,-135,0]},
        "Security spawn":{"vec":[-11089,-2298,-978],"ang":[1,-87,0]},
        "Medic spawn":{"vec":[-6107,-7136,14],"ang":[-2,-180,0]},
        "Light armory":{"vec":[-5753,-1513,0],"ang":[0,-135,0]},
        "Heavy armory":{"vec":[-9423,2250,0],"ang":[0,90,0]},
        "Nuke room":{"vec":[-7821,-5978,200],"ang":[0,0,0]},
        "Nuke site":{"vec":[-7939,-5752,0],"ang":[0,135,0]},
        "SCP-035":{"vec":[-7683,-147,18],"ang":[-3,89,0]},
        "SCP-049":{"vec":[-8531,1470,28],"ang":[0,-89,0]},
        "SCP-079":{"vec":[-776,-4708,22],"ang":[3,-91,0]},
        "SCP-096":{"vec":[-12544,-2558,30],"ang":[1,180,0]},
        "SCP-106":{"vec":[-11141,-287,30],"ang":[-2,89,0]},
        "SCP-173":{"vec":[-1811,-1343,28],"ang":[1,91,0]},
        "SCP-457":{"vec":[-5440,-3092,21],"ang":[1,-1,0]},
        "SCP-914":{"vec":[3100,-2231,0],"ang":[0,0,0]},
        "SCP-996":{"vec":[-5406,2626,4],"ang":[-2,-1,0]}
    },
    "[SCP] 914": {
        "usemathcounter":true,
        "countername": "scp_914_logic_counter",
        "switchbutton": 443873,
        "runbutton": 516151,
        "runtime": 8,
        "searchzone":[[3630, -2072, 20],[3762, -1947, 90]],
        "distance":[0, 425, 0]
    },
    "[SCP] 049": {
        "revive":{
            "time":3,
            "multi":true,
            "inpvs":true
        }
    },
    "[SCP] 173": {
        "radius":2000,
        "blinktime":5,
        "sound": {
            "neckbroke":"*/scp/173/neckbroke.mp3",
            "death": [
                "*/scp/173/death1.mp3",
                "*/scp/173/death2.mp3",
                "*/scp/173/death3.mp3"
            ]
        }
    },
    "[SCP] 457": {
        "ignitetime":10
    }
```


## [doors.json](https://github.com/GeTtOo/SCP-Breach-CSGO/blob/main/addons/sourcemod/configs/scp/scp_site101/doors.json)

В данном файле настраиваются двери и доступ к ним. Блок начинается с ID двери, который можно узнать при включенном параметре `debug` в [config.json](https://github.com/GeTtOo/SCP-Breach-CSGO/blob/main/addons/sourcemod/configs/scp/scp_site101/config.json).  

| Параметр      | Значение      | Подробно  |
| ------------- |:-------------:| ---------|
| location | "Текст" | Название, что бы Вы не запутались в этой каше ID’шников (в моде не используется)
| access | Число от 0 до 10 | Уровень доступа
| scp | true или false | Могут ли SCP открыть дверь

**Пример:**  
```json
"354154": {
	"location": "Gate A Up",
	"access": 0,
	"scp": false
}
```

## [entities.json](https://github.com/GeTtOo/SCP-Breach-CSGO/blob/main/addons/sourcemod/configs/scp/scp_site101/entities.json)

Файл для настроек своих предметов (entity). Крайне не рекомендуем любые модификации данного файла (особенное если Вы не понимаете что, как и почему)  

| Параметр      | Значение      | Подробно  |
| ------------- |:-------------:| ---------|
| model | "путь к моделе" | Модель предмета |
| mass | Число с плавающей точкой | Масса предмета |
| skin | Целое число | Номер текстуры предмета |
| access | Массив уровней доступа | доступ, который даёт предмет |
| cooldown | Целое число | Время задержки после использования |

**Пример:**  
```json
"card_mog_commander": {
	"model":"models/eternity/props/keycard.mdl",
	"mass":0.2,
	"skin":3,
	"access":[1,2,4,5,6,7,8,9]
}
```

### Уровни доступа 
Делятся на 10 категорий:
1. Камеры содержания, уровень 1
2. Камеры содержания, уровень 2
3. Камеры содержания, уровень 3
4. Оружейные, уровень 1
5. Оружейные, уровень 2
6. Оружейные, уровень 3
7. Контрольно-пропускные пункты
8. Внутренняя связь
9. Выходы
10. Альфа-боеголовка

Каждый уровень ставиться отдельно. 
Пример карты с уровнем доступа - Камеры содержания 1 и Внутренняя связь:
```json
"card_facility_manager": {
	"model":"models/eternity/props/keycard.mdl",
	"mass":0.2,
	"skin":1,
	"access":[1,9]
}
```

## [regions.json](https://github.com/GeTtOo/SCP-Breach-CSGO/blob/main/addons/sourcemod/configs/scp/scp_site101/regions.json)

Настройка собственных зон (указателей на карте)  

```c
"radius": 800 – радиус зоны 
"pos": [3250,-2222,100] – координаты зоны
"name": "SCP-914" – отображаемое игрокам имя зоны 
```

## [spawn_map.json](https://github.com/GeTtOo/SCP-Breach-CSGO/blob/main/addons/sourcemod/configs/scp/scp_site101/spawn_map.json)

В данном файле осуществляется настройка появления предметов на карте  

```c
"Имя предмента" – оружие (к примеру weapon_deagle) или предмет (к примеру card_o5)
{
  "chance": 100 – шанс появления (от 1 до 100)
  "pos": [578, -3444, 43] – позиция появления
}
```

## [914.json](https://github.com/GeTtOo/SCP-Breach-CSGO/blob/main/addons/sourcemod/configs/scp/scp_site101/914.json)

В случае отключения модуля 914, данный конфигурационный файл не используется.  
Файл настройки SCP 914. **ВНИМАНИЕ! НЕ ТРОГАТЬ, ОНО ВАС СОЖРЁТ!**    

### Общие настройки  


### Настройка рецептов  

```c
"rough", "coarse", "one_by_one", "fine", "very_fine" – параметр качества установленный на 914
{
  "имя предмета" – оружие (к примеру weapon_deagle) или предмет (к примеру card_o5)
  "card_o5"
  [
    ["имя получаемого предмета", [Шанс уничтожения предмета от 0 до 100], [Шанс успешного улучшения предмета от 0 до 100]]
    ["weapon_m4a1_silencer", 0, 100]
  ]
  "player" – если необходимо провести манипуляции с игроком
  [
    ["Эффект, накладываемый на игрока (regeneration, speed, berserk, death)", Процент успешного «улучшения» от 0 до 100]
    ["Speed", 50]
  ]
}
```

Если у предмета указана несколько вариантов развития, то будет выбрано одно из них случайным образом. К примеру:

```json
"weapon_usp_silencer": [
  ["weapon_deagle", 30, 70],
  ["weapon_awp", 40, 90]
]
```

[^1]: ВНИМАНИЕ общая доля должна равняться 100!
[^2]: Обязательный для появления в начале раунда. К примеру: при малом количестве игроков Вам необходимо наличие хотя бы одного SCP. 
При значение данного параметра "true", SCP будет обязан появиться.
[^3]: ВНИМАНИЕ если Вы не понимаете что это НЕ ТРОГАЙТЕ
[^4]: Должен находиться в секции команды
[^5]: Игрок будет телепортирован при «проведение беседы»
[^6]: Данная настройка является опциональной. Она может быть не использована в случае отключения одноимённого плагина 
[^7]: Сначала нижняя точка, затем верхняя
[^8]: Если проще – куда телепортирует игрока после «звонка»
